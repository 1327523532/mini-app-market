<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ•°æ®ç»Ÿè®¡ - Mini-Application</title>
    <link rel="stylesheet" href="style.css">
    <style>
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 40px; }
        .stat-card { background: rgba(255,255,255,0.05); border-radius: 15px; padding: 25px; text-align: center; border: 1px solid rgba(255,255,255,0.1); }
        .stat-card:hover { transform: translateY(-3px); border-color: #667eea; }
        .stat-icon { font-size: 2.5em; margin-bottom: 15px; }
        .stat-number { font-size: 2.5em; font-weight: bold; background: linear-gradient(90deg, #667eea, #764ba2); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .stat-label { margin-top: 10px; opacity: 0.7; }
        .chart-section { background: rgba(255,255,255,0.05); border-radius: 15px; padding: 30px; margin-bottom: 30px; }
        .chart-title { font-size: 1.3em; margin-bottom: 20px; }
        .bar-chart { display: flex; flex-direction: column; gap: 15px; }
        .bar-item { display: flex; align-items: center; gap: 15px; }
        .bar-label { width: 80px; text-align: right; font-size: 0.9em; opacity: 0.8; }
        .bar-track { flex: 1; height: 30px; background: rgba(255,255,255,0.1); border-radius: 15px; overflow: hidden; }
        .bar-fill { height: 100%; background: linear-gradient(90deg, #667eea, #764ba2); border-radius: 15px; display: flex; align-items: center; justify-content: flex-end; padding-right: 15px; font-size: 0.85em; transition: width 0.5s; }
        .bar-value { width: 60px; text-align: left; margin-left: 15px; font-weight: bold; }
        .trend-list { display: flex; flex-direction: column; gap: 15px; }
        .trend-item { display: flex; justify-content: space-between; padding: 15px; background: rgba(255,255,255,0.05); border-radius: 10px; }
        .trend-up { color: #00b894; }
        .trend-down { color: #ff6b6b; }
        .hot-tags { display: flex; flex-wrap: wrap; gap: 10px; }
        .hot-tag { padding: 8px 16px; background: rgba(102,126,234,0.2); border-radius: 20px; font-size: 0.9em; }
        .hot-tag:nth-child(1) { background: linear-gradient(135deg, #fdcb6e, #e17055); }
        .hot-tag:nth-child(2) { background: linear-gradient(135deg, #ff6b6b, #ee5a24); }
        .hot-tag:nth-child(3) { background: linear-gradient(135deg, #00b894, #00cec9); }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-content">
            <a href="index.html" class="back-link">â† è¿”å›é¦–é¡µ</a>
            <h1>ğŸ“Š æ•°æ®ç»Ÿè®¡</h1>
        </div>
    </header>

    <main class="main">
        <section class="stats-grid" id="statsGrid">
            <div class="stat-card">
                <div class="stat-icon">ğŸ“¦</div>
                <div class="stat-number" id="totalApps">0</div>
                <div class="stat-label">åº”ç”¨æ€»æ•°</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">ğŸ“</div>
                <div class="stat-number" id="totalArticles">0</div>
                <div class="stat-label">æ–‡ç« æ€»æ•°</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">ğŸ’¬</div>
                <div class="stat-number" id="totalDemands">0</div>
                <div class="stat-label">éœ€æ±‚æ€»æ•°</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">ğŸ‘ï¸</div>
                <div class="stat-number" id="totalViews">0</div>
                <div class="stat-label">æ€»æµè§ˆé‡</div>
            </div>
        </section>

        <section class="chart-section">
            <h3 class="chart-title">ğŸ“ˆ åº”ç”¨ç±»å‹åˆ†å¸ƒ</h3>
            <div class="bar-chart" id="typeChart"></div>
        </section>

        <section class="chart-section">
            <h3 class="chart-title">ğŸ”¥ çƒ­é—¨æ ‡ç­¾</h3>
            <div class="hot-tags" id="hotTags"></div>
        </section>

        <section class="chart-section">
            <h3 class="chart-title">ğŸ“ˆ è¿‘æœŸè¶‹åŠ¿</h3>
            <div class="trend-list" id="trendList">
                <div class="trend-item">
                    <span>æ–°å¢åº”ç”¨</span>
                    <span class="trend-up">+0 æœ¬å‘¨</span>
                </div>
                <div class="trend-item">
                    <span>æ–°å¢æ–‡ç« </span>
                    <span class="trend-up">+0 æœ¬å‘¨</span>
                </div>
                <div class="trend-item">
                    <span>æ–°å¢éœ€æ±‚</span>
                    <span class="trend-up">+0 æœ¬å‘¨</span>
                </div>
                <div class="trend-item">
                    <span>æ€»æµè§ˆé‡</span>
                    <span class="trend-up">+0 æœ¬å‘¨</span>
                </div>
            </div>
        </section>
    </main>

    <footer class="footer">
        <p>ğŸ“Š Mini-Application æ•°æ®ç»Ÿè®¡</p>
    </footer>

    <script src="app.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            loadStats();
        });

        function loadStats() {
            // åº”ç”¨ç»Ÿè®¡
            const apps = appStorage.getAll();
            const articles = articleStorage.getAll();
            const demands = demandStorage.getAll();

            const appCount = apps.applications.length;
            const articleCount = articles.articles.length;
            const demandCount = demands.demands.length;
            
            // è®¡ç®—æ€»æµè§ˆé‡
            let totalViews = 0;
            apps.applications.forEach(a => totalViews += (a.views || 0));

            // æ›´æ–°æ•°å­—
            document.getElementById('totalApps').textContent = appCount;
            document.getElementById('totalArticles').textContent = articleCount;
            document.getElementById('totalDemands').textContent = demandCount;
            document.getElementById('totalViews').textContent = totalViews;

            // åº”ç”¨ç±»å‹åˆ†å¸ƒ
            const typeCount = { tool: 0, game: 0, utility: 0, other: 0 };
            apps.applications.forEach(a => {
                if (typeCount[a.type] !== undefined) {
                    typeCount[a.type]++;
                }
            });

            const typeLabels = { tool: 'ğŸ› ï¸ å·¥å…·', game: 'ğŸ® æ¸¸æˆ', utility: 'ğŸ“ æ•ˆç‡', other: 'ğŸ“¦ å…¶ä»–' };
            const maxType = Math.max(...Object.values(typeCount)) || 1;
            
            const typeChart = document.getElementById('typeChart');
            typeChart.innerHTML = Object.entries(typeCount).map(([type, count]) => `
                <div class="bar-item">
                    <div class="bar-label">${typeLabels[type]}</div>
                    <div class="bar-track">
                        <div class="bar-fill" style="width: ${(count / maxType) * 100}%"></div>
                    </div>
                    <div class="bar-value">${count}</div>
                </div>
            `).join('');

            // çƒ­é—¨æ ‡ç­¾
            const tagCount = {};
            apps.applications.forEach(a => {
                (a.tags || []).forEach(tag => {
                    tagCount[tag] = (tagCount[tag] || 0) + 1;
                });
            });

            const sortedTags = Object.entries(tagCount)
                .sort((a, b) => b[1] - a[1])
                .slice(0, 10);

            const hotTags = document.getElementById('hotTags');
            hotTags.innerHTML = sortedTags.map(([tag]) => `
                <span class="hot-tag">${tag}</span>
            `).join('');
        }
    </script>
</body>
</html>
